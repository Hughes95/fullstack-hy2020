(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t(1),r=t(17),o=t.n(r),u=t(4),i=t.n(u),s=t(6),l=t(7),d=t(3),f=function(e){return Object(a.jsx)("form",{children:Object(a.jsxs)("div",{children:["filter shown with",Object(a.jsx)("input",{value:e.newName,onChange:e.handlePerson})]})})},b=function(e){return Object(a.jsxs)("form",{onSubmit:e.addName,children:[Object(a.jsxs)("div",{children:["name:",Object(a.jsx)("input",{value:e.newName,onChange:e.handlePerson})]}),Object(a.jsxs)("div",{children:["number:",Object(a.jsx)("input",{value:e.newNumber,onChange:e.handleNumber})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},j=t(5),h=t.n(j),m="/api/persons",p=null,O={getAll:function(){return h.a.get(m).then((function(e){return e.data}))},create:function(){var e=Object(s.a)(i.a.mark((function e(n){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:p}},e.next=3,h.a.post(m,n,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(e,n){return h.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},poista:function(e){return h.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},setToken:function(e){p="bearer ".concat(e)}},v=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"error",children:n})},w=(t(41),function(e){var n=e.person,t=e.painaa,c=(n.name,"delete");return Object(a.jsxs)("div",{children:[n.name," ",n.number,Object(a.jsx)("button",{onClick:t,children:c})]})}),g=function(){var e=Object(c.useState)([]),n=Object(d.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),u=Object(d.a)(o,2),i=u[0],s=u[1],j=Object(c.useState)(""),h=Object(d.a)(j,2),m=h[0],p=h[1],g=Object(c.useState)(""),x=Object(d.a)(g,2),N=x[0],S=x[1],k=Object(c.useState)(!0),y=Object(d.a)(k,2),T=y[0],P=(y[1],Object(c.useState)(null)),A=Object(d.a)(P,2),C=A[0],J=A[1],E=Object(c.useState)(""),I=Object(d.a)(E,2),D=(I[0],I[1],Object(c.useState)("")),z=Object(d.a)(D,2),B=(z[0],z[1],Object(c.useState)(null)),U=Object(d.a)(B,2),q=(U[0],U[1]);Object(c.useEffect)((function(){O.getAll().then((function(e){r(e)}))}),[]),Object(c.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteappUser");if(e){var n=JSON.parse(e);q(n),O.setToken(n.token)}}),[]);var F=T?t:t.filter((function(e){return e.name})),G=t.find((function(e){return e.name===i}));!0===t.map((function(e){return e.name})).includes(i)&&!1===t.map((function(e){return e.id})).includes(i.id)&&(console.log(G.id),function(e){"http://localhost:3001/persons/".concat(e);var n=t.find((function(n){return n.id===e})),a=Object(l.a)(Object(l.a)({},n),{},{number:m});window.confirm(n.name+" is already added to phonebook, replace the old number with new one?")&&(O.update(e,a),window.location.reload().then(J(" ".concat(n.name," is updated"))).then(setTimeout((function(){J(null)}),2500)).then((function(a){r(t.map((function(t){return n.id!==e?t:a})))})).catch((function(a){r(t.filter((function(n){return n.id!==e}))),J("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){J(null)}),2500)})))}(G.id));return Object(a.jsxs)("div",{children:[Object(a.jsx)(v,{message:C}),Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(f,{newName:N,handlePerson:function(e){S(e.target.value)}}),Object(a.jsx)("h3",{children:"Add a new"}),Object(a.jsx)(b,{addName:function(e){e.preventDefault();var n={name:i,number:m,id:t.length+1};O.create(n).then(J("Note '".concat(i,"' added to phonebook"))).then(setTimeout((function(){J(null)}),5e3)).then((function(e){r(t.concat(e)),s(""),p("")})).catch((function(e){var n=JSON.stringify(e.response.data.error);J(n),console.log(e.response.data.error)})),window.location.reload()},newName:i,handlePerson:function(e){console.log(e.target.value),s(e.target.value)},newNumber:m,handleNumber:function(e){console.log(e.target.value),p(e.target.value)}}),Object(a.jsx)("h2",{children:"Numbers"}),F.filter((function(e){return e.name.includes(N)})).map((function(e,n){return Object(a.jsx)(w,{person:e,painaa:function(){return function(e){"http://localhost:3001/persons/".concat(e);var n=t.find((function(n){return n.id===e}));Object(l.a)(Object(l.a)({},n),{},{important:n.important}),window.confirm("Delete "+n.name+" ?")&&(O.poista(e).then(J(" ".concat(n.name," is deleted"))).then(setTimeout((function(){J(null)}),5e3)).then((function(n){r(t.map((function(t){return t.id!==e?t:n})))})).catch((function(n){r(t.filter((function(n){return n.id!==e})))})),window.location.reload())}(e.id)}},n)}))]})};o.a.render(Object(a.jsx)(g,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.0ddb1adb.chunk.js.map