{"version":3,"sources":["osa2/Filter.js","osa2/PersonForm.js","services/persons.js","components/Notification.js","components/Person.js","App.js","index.js"],"names":["Filter","props","value","newName","onChange","handlePerson","PersonForm","onSubmit","addName","newNumber","handleNumber","type","baseUrl","token","getAll","axios","get","then","response","data","create","newObject","a","config","headers","Authorization","post","update","id","put","poista","delete","setToken","newToken","Notification","message","className","Person","person","painaa","label","name","number","onClick","App","useState","persons","setPersons","setNewName","setNewNumber","etsi","setNewetsi","showAll","errorMessage","setErrorMessage","setUser","useEffect","personsService","initialPersons","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","personsToShow","filter","paivittaa","find","map","kaikki","includes","console","log","n","changed","confirm","location","reload","setTimeout","returned","p","catch","error","updateNumber","event1","target","event","preventDefault","personObject","length","concat","virhe","stringify","i","important","poistaa","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0ddb1adb.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = (props) => {\n  \n  return   <form>\n            <div>filter shown with\n            <input value={props.newName} onChange={props.handlePerson} />\n            </div>\n          </form>\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = (props) => {\n  \n  return  <form onSubmit={props.addName}>\n  <div>name:<input value={props.newName} onChange={props.handlePerson} />\n  </div>\n  <div>number:<input value={props.newNumber}onChange={props.handleNumber} /></div>\n  <div>\n   <button type=\"submit\">add</button>\n  </div>\n </form>\n}\n\nexport default PersonForm","import axios from 'axios'\nconst baseUrl = '/api/persons'\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n  }\n\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n  \n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nconst poista = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, poista, setToken}\n","import React from 'react'\n\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n}\n\nexport default Notification","import React from 'react'\n\nconst Person = ({ person, painaa }) => {\n  const label = person.name\n    ? 'delete' : 'delete'\n\n  return (\n    <div>\n      {person.name} {person.number}  \n      <button onClick={painaa}>{label}</button>\n    </div>\n  )\n}\nexport default Person","import React, { useState, useEffect } from 'react'\nimport Filter from './osa2/Filter'\nimport PersonForm from './osa2/PersonForm'\nimport personsService from './services/persons'\nimport Notification from './components/Notification'\nimport './index.css'\nimport Person from './components/Person'\nimport loginService from './services/login' \n\n\nconst App = () => {\n    const [ persons, setPersons] = useState([]) \n    const [ newName, setNewName ] = useState('')\n    const [ newNumber, setNewNumber ] = useState('')\n    const [ etsi, setNewetsi] = useState('')\n    const [showAll, setShowAll] = useState(true)\n    const [errorMessage, setErrorMessage] = useState(null)\n    const [username, setUsername] = useState('') \n    const [password, setPassword] = useState('') \n    const [user, setUser] = useState(null)\n\n\n      useEffect(() => {\n        personsService\n        .getAll()\n        .then(initialPersons => {\n          setPersons(initialPersons)\n        })\n      }, [])\n\n      useEffect(() => {\n        const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser')\n        if (loggedUserJSON) {\n          const user = JSON.parse(loggedUserJSON)\n          setUser(user)\n          personsService.setToken(user.token)\n        }\n      }, [])\n      \n      const addName = (event) => {\n        event.preventDefault()\n        const personObject = {\n          name: newName,\n          number: newNumber,\n          id: persons.length + 1,\n        }\n\n        personsService\n        .create(personObject)\n        .then(setErrorMessage(\n          `Note '${newName}' added to phonebook`\n        ))\n        .then(setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)   )\n        .then(returned=> {\n        setPersons(persons.concat(returned))\n        setNewName('')\n        setNewNumber('')\n        })\n        .catch(error => {\n        var virhe = JSON.stringify(error.response.data.error);\n          setErrorMessage(virhe)\n\n          console.log(error.response.data.error)\n        })\n        window.location.reload()\n      }\n\n      const updateNumber = (id) => {\n        const url = `http://localhost:3001/persons/${id}`\n        const person = persons.find(n => n.id === id)\n        const changed = { ...person, number: newNumber }\n\n        if( window.confirm( person.name + \" is already added to phonebook, replace the old number with new one?\") ) {\n            personsService\n            .update(id, changed)\n            window.location.reload()\n            .then(setErrorMessage(\n              ` ${person.name} is updated`\n            ))\n            .then(setTimeout(() => {\n              setErrorMessage(null)\n            }, 2500)   )\n            .then(returned => {\n              setPersons(persons.map(p => person.id !== id ? p : returned))\n            })\n            .catch(error => {\n              setPersons(persons.filter(n => n.id !== id))\n              setErrorMessage(\n                `Information of ${person.name} has already been removed from server`\n              )\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 2500)   \n            })\n        }\n      }\n\n      const poistaa = (id) => {\n        const url = `http://localhost:3001/persons/${id}`\n        const person = persons.find(n => n.id === id)\n        const changedNote = { ...person, important: person.important }\n      \n        if (window.confirm(\"Delete \" + person.name + \" ?\")) {\n          personsService\n          .poista(id)\n          .then(setErrorMessage(\n            ` ${person.name} is deleted`\n          ))\n          .then(setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)   )\n          .then(returned => {\n            setPersons(persons.map(p => p.id !== id ? p : returned))\n          })\n          .catch(error => {\n            setPersons(persons.filter(n => n.id !== id))\n          })\n          window.location.reload()\n        }\n      }\n\n      const handleEtsi = (event1) => {\n        setNewetsi(event1.target.value)\n      }\n\n      const handlePerson = (event) => {\n        console.log(event.target.value)   \n        setNewName(event.target.value)\n      }\n\n      const handleNumber = (event) => {\n        console.log(event.target.value)   \n        setNewNumber(event.target.value)\n      }\n      \n    const personsToShow = showAll\n    ? persons\n    : persons.filter(person => person.name)\n\n    const paivittaa =  persons.find( ({name}) => name === newName  );\n\n    if(persons.map(kaikki => kaikki.name).includes(newName) === true && persons.map(kaikki => kaikki.id).includes(newName.id) === false ) {\n      console.log(paivittaa.id)\n      updateNumber(paivittaa.id)\n    }\n\n\n    const handleLogin = async (event) => {\n      event.preventDefault()\n      \n    try {\n        const user = await loginService.login({\n          username, password,\n        })\n\n        window.localStorage.setItem(\n          'loggedNoteappUser', JSON.stringify(user)\n        ) \n        personsService.setToken(user.token)\n        setUser(user)\n        setUsername('')\n        setPassword('')\n      } catch (exception) {\n        setErrorMessage('wrong credentials')\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      } \n      \n    }\n\n    const loginForm = () => (\n      <form onSubmit={handleLogin}>\n        <div>\n          username\n            <input\n            type=\"text\"\n            value={username}\n            name=\"Username\"\n            onChange={({ target }) => setUsername(target.value)}\n          />\n        </div>\n        <div>\n          password\n            <input\n            type=\"password\"\n            value={password}\n            name=\"Password\"\n            onChange={({ target }) => setPassword(target.value)}\n          />\n        </div>\n        <button type=\"submit\">login</button>\n      </form>      \n    )\n  \n\n   return (\n      <div>\n      <Notification message={errorMessage} />\n      <h2>Phonebook</h2>    \n        <Filter newName={etsi} handlePerson={handleEtsi}  />\n        <h3>Add a new</h3>\n        <PersonForm addName={addName} newName={newName} handlePerson={handlePerson} \n        newNumber={newNumber} handleNumber={handleNumber} />\n        <h2>Numbers</h2>\n          {personsToShow.filter(person => person.name.includes(etsi)).map((\n          (person, i) => <Person key={i} \n          person={person} \n          painaa={() => poistaa(person.id)}/> ))} \n          </div>\n    )\n  }\n\nexport default App ","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport axios from 'axios'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}